{# вначале пишем макрос для обработки дерева #}
{# макрос не универсален, поэтому пока оставляем так #}
{% macro list(items, step = 0) %}
{% import _self as tree %}

{# начало ветки #}
<div class="row">
    {% for item in items %}
        {{ item.text }}
    <div id="question_{{ item.id }}" class="row">
        {% for answer in item.answers %}
        {#
        {% if item.type == "radio" %}{{ include('Anketa/radio.element.html') }}{% endif %}
        {% if item.type == "checkbox" %}{{ include('Anketa/checkbox.element.html') }}{% endif %}
        #}
        <a data-toggle="collapse" data-parent="#question_{{ item.id }}" href="#childrens_{{ item.id }}">{{ answer.text }}</a>
        {% endfor %}
        {% if item.hasChildren %}
        <div id="childrens_{{ item.id }}" class="panel-collapse collapse">
        {{ tree.list(item.childrens, step + 1) }}
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endmacro %}
{# конец макроса #}
{% import _self as tree %}

<h1 class="text-center">{{form.name}}</h1>
<h2 class="text-center">{{form.description}}</h2>
<div class="container">
{{ tree.list(form.questions) }}
</div>
